var CacheManager=function(){"use strict";var e=function(e,t){for(var r in t)"object"==typeof t[r]?(e[r]=e[r]||{},arguments.callee(e[r],t[r])):e[r]=t[r];return e},t=function(e){return JSON.stringify(e,function(e,t){var r=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/;return t instanceof Function||"function"==typeof t?t.toString():t instanceof RegExp?"_ReGuEx_"+t:t instanceof String||"string"==typeof t&&t.match(r)?"_DaTeOj_"+t:"$$hashKey"===e?"":t})},r=function(e){return JSON.parse(e,function(e,t){var r;return"string"!=typeof t?t:t.length<8?t:(r=t.substring(0,8),"function"===r?window.eval("("+t+")"):"_ReGuEx_"===r?window.eval(t.slice(8)):"_DaTeOj_"===r?new Date(t.slice(8)):t)})},i=function(e){e=e||{},this.prefix=e.prefix||"__cm__",this.removeTrash()};return i.prototype._getItem=function(e){try{var t=sessionStorage.getItem(e);return t||(t=localStorage.getItem(e)),t}catch(r){throw"CacheManager : not support browser"}},i.prototype.getItem=function(e,t){var i=this.prefix+e,o=this._getItem(i);if(!o)return null;var a=r(o),n=a.lifeTime,s=new Date;return t&&this.removeItem(i),null===n?a.data:n.getTime()>=s.getTime()?a.data:n.getTime()<s.getTime()?(this.removeItem(i),null):void 0},i.prototype.getAll=function(){try{var t=sessionStorage,i=localStorage,o=e(t,i),a=[];for(var n in o)if(n.indexOf(this.prefix)>-1){var s=r(o[n]),f=n.replace(this.prefix,""),c={};c[f]=s.data,a.push(c)}return a}catch(p){throw"CacheManager : not support browser"}},i.prototype.getAllName=function(){try{var t=sessionStorage,r=localStorage,i=e(t,r),o=[];for(var a in i)if(a.indexOf(this.prefix)>-1){var n=a.replace(this.prefix,"");o.push(n)}return o}catch(s){throw"CacheManager : not support browser"}},i.prototype.getForce=function(e,t){var i=this.prefix+e,o=this._getItem(i);if(o){var a=r(o);return t&&this.removeItem(i),a.data}return null},i.prototype.removeItem=function(e){try{var t=e.indexOf(this.prefix)>-1?e:this.prefix+e;sessionStorage.removeItem(t),localStorage.removeItem(t)}catch(r){throw"CacheManager : not support browser"}},i.prototype.setItem=function(e,r,i){if(!e)throw"CacheManager : require param error";var o=this.prefix+e;this.removeItem(o);var a=r,n={lifeTime:null,data:a},s=new Date;try{if("undefined"==typeof i)sessionStorage.setItem(o,t(n));else if("number"==typeof i)0===i?localStorage.setItem(o,t(n)):(s.setTime(s.getTime()+i),n.lifeTime=s,localStorage.setItem(o,t(n)));else{if(!(i instanceof Date))throw"CacheManager : timer type error";s.setTime(i),n.lifeTime=s,localStorage.setItem(o,t(n))}}catch(f){throw"CacheManager : not support browser"}},i.prototype.isLive=function(e){var t=this.prefix+e,i=this._getItem(t);if(!i)return null;var o=r(i),a=o.lifeTime,n=new Date;return a&&a.getTime()<=n.getTime()?!1:!0},i.prototype.removeTrash=function(){for(var e=this.getAllName(),t=0;t<e.length;t++){var r=e[t],i=localStorage.getItem(this.prefix+r);i&&!this.isLive(r)&&this.removeItem(r)}},i}();